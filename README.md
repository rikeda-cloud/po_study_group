# 🧩 TypeScript勉強会課題：APIレスポンス整形ユーティリティを実装せよ

## 背景

あなたはとあるサービスのフロントエンド開発を担当しています。

このサービスが利用するバックエンドAPIは、歴史的な経緯から非常に不安定で、ドキュメント通りのレスポンスを返さないことがあります。
例えば、必須なはずのフィールドが欠けていたり、期待する型とは違う型の値（例：`number`であるべき箇所が`string`）が返ってきたりします。

このままでは、フロントエンドの予期せぬ挙動やクラッシュの原因となりかねません。

## 課題

APIからのレスポンスを安全に処理し、定義された型に整形するユーティリティ関数 `processApiResponse` を実装・改善してください。

`src/index.ts` にある `processApiResponse` 関数が実装対象です。
初期状態では、この関数は擬似APIから受け取ったデータをそのまま返しているため、テストが失敗します。

あなたのゴールは、**すべてのテストが成功する**ようにこの関数を改修することです。

## 評価基準

以下の観点からコードを評価し、議論の材料とします。

1.  **型安全性**: TypeScriptの機能を活かし、不正なデータがアプリケーション内で利用されることを防げているか。
2.  **堅牢性**: 予期せぬレスポンス形式に対して、クラッシュすることなく安全に処理を終えられるか。
3.  **コードの可読性・保守性**: 処理内容が理解しやすく、将来の仕様変更にも対応しやすいか。

## API仕様

期待される正常なレスポンスの型は `src/api-spec.ts` の `ApiResponse` として定義されています。

- **成功時**: `status` が `success` となり、`data` にユーザー情報または製品情報が含まれます。
- **失敗時**: `status` が `error` となり、エラー情報が含まれます。

## セットアップと実行

1.  依存パッケージをインストールします。
    ```bash
    npm install
    ```

2.  テストを実行します。
    ```bash
    npm test
    ```

    あなたの改修によって、すべてのテストがパスすることを目指してください。

## ヒント

- 型ガード (Type Guards)
-  discriminated unions (判別可能なUnion型)
- `zod` や `io-ts` のようなバリデーションライブラリの利用（任意）
